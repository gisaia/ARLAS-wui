<div class="app-container">

    <div class="arlas-map">
      <arlas-mapgl [geojsondata]="mapglcontributor?.geojsondata" (onRemoveBbox)="mapglcontributor?.onRemoveBbox($event)" [style]="mapglcontributor?.getConfigValue('basemapUrl')"
        [margePanForLoad]=40 [margePanForTest]=2 (onChangeBbox)="mapglcontributor?.onChangeBbox($event)"
        [initCenter]="initCenter" [initZoom]="2"
        [paintRuleClusterCircle]="mapglcontributor?.getConfigValue('paintRuleClusterCircle')"
        [paintRuleClusterFeatureLine]="mapglcontributor?.getConfigValue('paintRuleClusterFeatureLine')"
        [paintRuleCLusterFeatureFill]="mapglcontributor?.getConfigValue('paintRuleCLusterFeatureFill')"
        [paintRuleGeoBox]="mapglcontributor?.getConfigValue('paintRuleGeoBox')"
        [fontClusterlabel]="mapglcontributor?.getConfigValue('fontClusterlabel')"
        (onMove)="mapglcontributor?.onMove($event)"
        [redrawTile]="mapglcontributor?.redrawTile">
      </arlas-mapgl>
    </div>

    <div class="arlas-search">
      <arlas-search (valuesChangedEvent)="chipsSearchContributor?.addWord($event)"></arlas-search>
    </div>

    <div class="arlas-timeline">
      <arlas-histogram #timeline [xTicks]="7" [yTicks]="2" [xLabels]="7" [yTicks]="2" [chartType]="chartType.area" [dataType]="dataType.time"
        [chartTitle]="'Number of products over time'" [customizedCssClass]="'custom-arlas-timeline'" [chartHeight]="100" [dateUnit]="dateUnit.millisecond"
        [xAxisPosition]="position.top" [descriptionPosition]="position.top" (valuesChangedEvent)="timelinecontributor?.valueChanged($event)"
        [data]="timelinecontributor?.chartData" [intervalSelection]="timelinecontributor?.intervalSelection"></arlas-histogram>
    </div>

    <div class="arlas-analytics--container" (mouseenter)="showToggle()" (mouseleave)="hideToggle()" >
        <div *ngIf="!isFilterMode" class="arlas-analytics__thumbnails" (click)="showAnalyticsAsFilters($event)" >
          <div class="arlas-analytics__one-analytic">
            <label class="arlas-analytics__title">Cloud coverage : </label>
            <div class="arlas-analytics__chart-container">
              <arlas-histogram #cloudCoverage [xTicks]="4" [xLabels]="4" [yTicks]="0" [chartType]="chartType.bars" [dataType]="dataType.numeric"
              [showXTicks]=true [showYTicks]=false [showYLabels]=false [showXLabels]=false [customizedCssClass]="'custom-arlas-histogram__thumbnail'" [chartHeight]="70"
              [dateUnit]="dateUnit.millisecond" [data]="cloudcoveragecontributor?.chartData"
              [intervalSelection]="cloudcoveragecontributor?.intervalSelection" [descriptionPosition]="position.bottom"></arlas-histogram>
            </div>
          </div>
          <div class="arlas-analytics__one-analytic">
            <label class="arlas-analytics__title">Incidence : </label>
            <div class="arlas-analytics__chart-container">
              <arlas-histogram #quality [xTicks]="7" [xLabels]="7" [yTicks]="2" [yTicks]="2" [chartType]="chartType.oneDimension" [dataType]="dataType.numeric"
                          [chartTitle]="'Incidence'" [showXTicks]=false [showYTicks]=false [showYLabels]=false [showXLabels]=false [customizedCssClass]="'custom-arlas-histogram__thumbnail'" [chartHeight]="5"
                          [dateUnit]="dateUnit.millisecond" (valuesChangedEvent)="qualitycontributor?.valueChanged($event)" [data]="qualitycontributor?.chartData"
                          [paletteColors]="'#C36784'" [intervalSelection]="qualitycontributor?.intervalSelection" [descriptionPosition]="position.bottom"></arlas-histogram>
            </div>
          </div>
          <div class="arlas-analytics__one-analytic">
            <label class="arlas-analytics__title">Azimuth : </label>
            <div class="arlas-analytics__chart-container">
              <arlas-histogram #azimut [xTicks]="7" [xLabels]="6" [yTicks]="2" [yTicks]="2" [chartType]="chartType.oneDimension" [dataType]="dataType.numeric"
                          [chartTitle]="'Azimut'" [showXTicks]=false [showYLabels]=false [showXLabels]=false [customizedCssClass]="'custom-arlas-histogram__thumbnail'" [chartHeight]="5" [dateUnit]="dateUnit.millisecond"
                          (valuesChangedEvent)="azimutcontributor?.valueChanged($event)" [data]="azimutcontributor?.chartData" [paletteColors]="'#07889B'"
                          [intervalSelection]="azimutcontributor?.intervalSelection" [descriptionPosition]="position.bottom"></arlas-histogram>
            </div>
          </div>
        </div>
        <div *ngIf="isFilterMode" class="arlas-analytics__filters" >
          <button class="arlas-analytics__back_to_thumbnails" md-mini-fab color="primary" (click)="showAnalyticsAsThumbnails($event)">
              <md-icon>skip_previous</md-icon>
          </button>

          <div class="arlas-analytics__one-analytic">
            <label class="arlas-analytics__title">Cloud coverage : </label>

            <arlas-histogram #cloudCoverageFilter [xTicks]="4" [xLabels]="4" [yTicks]="1" [yLabels]="4" [chartType]="chartType.bars" [dataType]="dataType.numeric"
                    [showXTicks]=true [showYTicks]=true [customizedCssClass]="'custom-arlas-histogram__filter'" [chartHeight]="120"
                    [dateUnit]="dateUnit.millisecond" [data]="cloudcoverageFiltercontributor?.chartData"
                    (valuesChangedEvent)="cloudcoverageFiltercontributor?.valueChanged($event)"
                    [intervalSelection]="cloudcoverageFiltercontributor?.intervalSelection" [descriptionPosition]="position.bottom"></arlas-histogram>
          </div>
          <div class="arlas-analytics__one-analytic">
            <label class="arlas-analytics__title">Incidence : </label>
            <arlas-histogram #quality [xTicks]="7" [xLabels]="7" [yTicks]="2" [yTicks]="2" [chartType]="chartType.oneDimension" [dataType]="dataType.numeric"
                          [showXTicks]=false [showYTicks]=false [customizedCssClass]="'custom-arlas-histogram__filter'" [chartHeight]="5"
                          [dateUnit]="dateUnit.millisecond" (valuesChangedEvent)="test($event)" [data]="qualityFiltercontributor?.chartData"
                          [paletteColors]="'#C36784'" [intervalSelection]="qualityFiltercontributor?.intervalSelection" [descriptionPosition]="position.bottom"></arlas-histogram>
          </div>
          <div class="arlas-analytics__one-analytic">
            <label class="arlas-analytics__title">Azimut : </label>
            <arlas-histogram #azimut [xTicks]="7" [xLabels]="6" [yTicks]="2" [yTicks]="2" [chartType]="chartType.oneDimension" [dataType]="dataType.numeric"
                          [showXTicks]=false [customizedCssClass]="'custom-arlas-histogram__filter'" [chartHeight]="5" [dateUnit]="dateUnit.millisecond"
                          (valuesChangedEvent)="azimutFiltercontributor?.valueChanged($event)" [data]="azimutFiltercontributor?.chartData" [paletteColors]="'#07889B'"
                    [intervalSelection]="azimutFiltercontributor?.intervalSelection" [descriptionPosition]="position.bottom"></arlas-histogram>
          </div>
        </div>
    </div>
</div>





