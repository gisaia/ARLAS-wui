<div class="app-container">

    <div class="arlas-map">
      <arlas-mapgl [geojsondata]="mapglcontributor?.geojsondata" (onRemoveBbox)="mapglcontributor?.onRemoveBbox($event)" [style]="mapglcontributor?.getConfigValue('basemapUrl')"
        [margePanForLoad]=40 [margePanForTest]=2 (onChangeBbox)="mapglcontributor?.onChangeBbox($event)"
        [initCenter]="initCenter" [initZoom]="2"
        [paintRuleClusterCircle]="mapglcontributor?.getConfigValue('paintRuleClusterCircle')"
        [paintRuleClusterFeatureLine]="mapglcontributor?.getConfigValue('paintRuleClusterFeatureLine')"
        [paintRuleCLusterFeatureFill]="mapglcontributor?.getConfigValue('paintRuleCLusterFeatureFill')"
        [paintRuleGeoBox]="mapglcontributor?.getConfigValue('paintRuleGeoBox')"
        [fontClusterlabel]="mapglcontributor?.getConfigValue('fontClusterlabel')"
        (onMove)="mapglcontributor?.onMove($event)"
        [redrawTile]="mapglcontributor?.redrawTile">
      </arlas-mapgl>
    </div>

    <div class="arlas-search">
      <arlas-search (valuesChangedEvent)="chipsSearchContributor?.addWord($event)"></arlas-search>
    </div>

    <div class="arlas-timeline">
      <arlas-histogram #timeline [xTicks]="7" [yTicks]="2" [xLabels]="7" [yTicks]="2" [chartType]="chartType.area" [dataType]="dataType.time"
        [chartTitle]="'Number of products over time'" [customizedCssClass]="'custom-arlas-timeline'" [chartHeight]="100" [dateUnit]="dateUnit.millisecond"
        [xAxisPosition]="position.top" [descriptionPosition]="position.top" (valuesChangedEvent)="timelinecontributor?.valueChanged($event)"
        [data]="timelinecontributor?.chartData" [intervalSelection]="timelinecontributor?.intervalSelection"></arlas-histogram>
    </div>
    <div class="arlas-analytics--container" (mouseenter)="showToggle()" (mouseleave)="hideToggle()" >
      <div *ngIf="!isFilterMode" class="arlas-analytics__thumbnails" (click)="showAnalyticsAsFilters($event)" >
        <div *ngFor="let histogram of histograms">
          <div *ngIf="!histogram.isFilter" class="arlas-analytics__one-analytic">
            <label class="arlas-analytics__title">{{histogram.title}} </label>
            <div class="arlas-analytics__chart-container">
              <arlas-histogram [chartType]="histogram.chartType" [dataType]="dataType.numeric"
              [xLabels]="6" [yTicks]="2" [yTicks]="2"
              [showXTicks]=false [showYTicks]=false [showYLabels]=false [showXLabels]=false
              [customizedCssClass]="'custom-arlas-histogram__thumbnail'" [chartHeight]="histogram.chartHeight"
              [dateUnit]="histogram.dateUnit" [data]="histogram.histogramContributor?.chartData" [paletteColors]="histogram.paletteColor"
              [intervalSelection]="histogram.histogramContributor?.intervalSelection" [descriptionPosition]="position.bottom"></arlas-histogram>
            </div>
          </div>
        </div>
      </div>
      <div *ngIf="isFilterMode" class="arlas-analytics__filters" >
        <button class="arlas-analytics__back_to_thumbnails" md-mini-fab color="primary" (click)="showAnalyticsAsThumbnails($event)">
          <md-icon>skip_previous</md-icon>
        </button>
        <div *ngFor="let histogram of histograms">
          <div *ngIf="histogram.isFilter" class="arlas-analytics__one-analytic">
            <label class="arlas-analytics__title">{{histogram.title}} </label>
            <arlas-histogram #cloudCoverageFilter [xTicks]="4" [xLabels]="4" [yTicks]="1" [yLabels]="4" [chartType]="histogram.chartType" [dataType]="dataType.numeric"
                    [showXTicks]=true [showYTicks]=true [customizedCssClass]="'custom-arlas-histogram__filter'" [chartHeight]="histogram.chartHeight"
                    [dateUnit]="dateUnit.millisecond" [data]="histogram.histogramContributor?.chartData"
                    (valuesChangedEvent)="histogram.histogramContributor?.valueChanged($event)"
                    [intervalSelection]="histogram.histogramContributor?.intervalSelection" [descriptionPosition]="position.bottom" [paletteColors]="histogram.paletteColor"></arlas-histogram>
          </div>
        </div>
      </div>
    </div>
</div>





