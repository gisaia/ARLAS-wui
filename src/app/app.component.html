<arlas-tool-root></arlas-tool-root>
<div class="app-container">

  <div class="arlas-map">
    <arlas-mapgl #map [geojsondata]="mapglContributor?.geojsondata" (onRemoveBbox)="mapglContributor?.onRemoveBbox($event)"
      [style]="mapComponentConfig?.style"
      [margePanForLoad]="mapComponentConfig?.margePanForLoad" [margePanForTest]="mapComponentConfig?.margePanForTest"
      (onChangeBbox)="mapglContributor?.onChangeBbox($event)"
      [initCenter]="initCenter"
      [initZoom]="2"
      [zoomToPrecisionCluster]="mapglContributor?.zoomToPrecisionCluster"
      [idFeatureField]="mapComponentConfig?.idFieldName"
      [maxPrecision]="mapglContributor?.maxPrecision"
      (onMove)="mapglContributor?.onMove($event)"
      [geoboxdata]="mapglContributor?.geojsonbbox"
      [mapLayers]="mapComponentConfig?.mapLayers"
      [displayLayerSwitcher]=true>
    </arlas-mapgl>

  </div>

  <div class="arlas-search">
    <arlas-search #search (valuesChangedEvent)="filterSearch($event)"></arlas-search>
  </div>
  <span class="arlas-analytics-toggle" (click)="toggleAnalytics($event)" matTooltip="Toggle analytics board">
    <mat-icon [class.toggle-open]="analyticsOpen">filter_list</mat-icon>
  </span>
  <div class="arlas-filters-chips">
    <arlas-filters-chips></arlas-filters-chips>
  </div>

  <div class="arlas-analytics--container" *ngIf="analyticsOpen">
    <arlas-analytics-board [groups]="this.analytics"></arlas-analytics-board>
  </div>

  <div class="arlas-geojson">
    <arlas-share [icon]="'share'"></arlas-share>
  </div>

  <div class="arlas-timeline">
    <arlas-histogram #timeline [xTicks]="7" [yTicks]="2" [xLabels]="7" [yTicks]="2" [chartType]="chartType.area" [dataType]="dataType.time"
      [chartTitle]="'Number of airplanes positions over time'" [customizedCssClass]="'arlas-timeline'" [chartHeight]="100"
      [xAxisPosition]="position.top" [descriptionPosition]="position.top" (valuesListChangedEvent)="timelineContributor?.valueChanged($event)"
      [intervalListSelection]="timelineContributor?.intervalListSelection" [multiselectable]="true" [brushHandlesHeightWeight]="0.8"
      [data]="timelineContributor?.chartData" [intervalSelection]="timelineContributor?.intervalSelection"></arlas-histogram>
  </div>
  <mat-progress-bar class="arlas-progression" *ngIf="collaborativeService.totalSubscribe>0" color="primary" mode="indeterminate"></mat-progress-bar>
</div>
